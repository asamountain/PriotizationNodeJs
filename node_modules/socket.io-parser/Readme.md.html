<html><head><title>Readme.md</title></head><body><h1>socket.io-parser</h1>
<p><a href="https://github.com/socketio/socket.io-parser/actions"><img src="https://github.com/socketio/socket.io-parser/workflows/CI/badge.svg" alt="Build Status" /></a>
<a href="http://badge.fury.io/js/socket.io-parser"><img src="https://badge.fury.io/js/socket.io-parser.svg" alt="NPM version" /></a></p>
<p>A socket.io encoder and decoder written in JavaScript complying with version <code>5</code>
of <a href="https://github.com/socketio/socket.io-protocol">socket.io-protocol</a>.
Used by <a href="https://github.com/automattic/socket.io">socket.io</a> and
<a href="https://github.com/automattic/socket.io-client">socket.io-client</a>.</p>
<p>Compatibility table:</p>
<p>| Parser version | Socket.IO server version | Protocol revision |
|----------------| ------------------------ | ----------------- |
| 3.x            | 1.x / 2.x                | 4                 |
| 4.x            | 3.x                      | 5                 |</p>
<h2>Parser API</h2>
<p>socket.io-parser is the reference implementation of socket.io-protocol. Read
the full API here:
<a href="https://github.com/learnboost/socket.io-protocol">socket.io-protocol</a>.</p>
<h2>Example Usage</h2>
<h3>Encoding and decoding a packet</h3>
<pre><code class="language-js">var parser = require('socket.io-parser');
var encoder = new parser.Encoder();
var packet = {
  type: parser.EVENT,
  data: 'test-packet',
  id: 13
};
encoder.encode(packet, function(encodedPackets) {
  var decoder = new parser.Decoder();
  decoder.on('decoded', function(decodedPacket) {
    // decodedPacket.type == parser.EVENT
    // decodedPacket.data == 'test-packet'
    // decodedPacket.id == 13
  });

  for (var i = 0; i &lt; encodedPackets.length; i++) {
    decoder.add(encodedPackets[i]);
  }
});
</code></pre>
<h3>Encoding and decoding a packet with binary data</h3>
<pre><code class="language-js">var parser = require('socket.io-parser');
var encoder = new parser.Encoder();
var packet = {
  type: parser.BINARY_EVENT,
  data: {i: new Buffer(1234), j: new Blob([new ArrayBuffer(2)])},
  id: 15
};
encoder.encode(packet, function(encodedPackets) {
  var decoder = new parser.Decoder();
  decoder.on('decoded', function(decodedPacket) {
    // decodedPacket.type == parser.BINARY_EVENT
    // Buffer.isBuffer(decodedPacket.data.i) == true
    // Buffer.isBuffer(decodedPacket.data.j) == true
    // decodedPacket.id == 15
  });

  for (var i = 0; i &lt; encodedPackets.length; i++) {
    decoder.add(encodedPackets[i]);
  }
});
</code></pre>
<p>See the test suite for more examples of how socket.io-parser is used.</p>
<h2>License</h2>
<p>MIT</p>
</body></html>